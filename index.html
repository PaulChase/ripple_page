<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Ripple Project</title>

		<link rel="stylesheet" href="/dist/app.css" />

		<!-- alpine js -->
		<script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>

		<!-- chart js cdn -->
		<script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>

		<!-- google fonts -->
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&display=swap"
			rel="stylesheet"
		/>

		<style>
			body {
				font-family: "Montserrat", sans-serif;
			}
		</style>
	</head>
	<body class="bg-gray-50">
		<main>
			<!-- top Nav -->
			<nav class="p-3" x-data="{ isNavOpen: false}">
				<div class="max-w-[90rem] mx-auto flex justify-between items-center">
					<!-- logo  -->
					<img src="/img/logo.png" alt="" class="lg:h-12 h-10" />

					<div
						class="lg:flex lg:static lg:flex-row lg:items-center lg:w-auto lg:p-0 lg:space-y-0 lg:text-lg space-x-6 fixed z-50 top-0 left-0 w-full h-full bg-white flex-col p-10 justify-start space-y-8 text-center text-2xl overflow-y-auto lg:overflow-y-visible text-gray-500"
						x-cloak
						x-bind:class="isNavOpen ? 'flex' : 'hidden'"
					>
						<div class="flex items-center justify-end lg:hidden">
							<button @click="isNavOpen = false">
								<svg
									xmlns="http://www.w3.org/2000/svg"
									class="h-10 w-10"
									fill="none"
									viewBox="0 0 24 24"
									stroke="gray"
									stroke-width="2"
								>
									<path
										stroke-linecap="round"
										stroke-linejoin="round"
										d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"
									/>
								</svg>
							</button>
						</div>

						<a href="#" class="font-semibold"> Home</a>

						<a href="#" class="font-semibold"> Nigerian Laws</a>
						<a href="#" class="font-semibold"> Discussion Forum</a>

						<!-- dropdown one -->
						<div class="flex flex-col space-y-8 lg:relative" x-data="{ isSubMenuOpen: false }">
							<button
								@click="isSubMenuOpen = !isSubMenuOpen"
								class="font-semibold flex items-center justify-center space-x-2"
							>
								<span>Directories</span>
								<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6">
									<path
										fill-rule="evenodd"
										d="M12.53 16.28a.75.75 0 01-1.06 0l-7.5-7.5a.75.75 0 011.06-1.06L12 14.69l6.97-6.97a.75.75 0 111.06 1.06l-7.5 7.5z"
										clip-rule="evenodd"
									/>
								</svg>
							</button>
							<div
								class="flex flex-col space-y-8 lg:items-start lg:absolute lg:bg-gray-50 lg:rounded-lg lg:py-4 lg:px-6 lg:shadow-lg top-2"
								style="z-index: 999999999"
								x-show="isSubMenuOpen"
								@click.outside="isSubMenuOpen = false"
							>
								<a href="/pages/employment_test.html" class="font-semibold whitespace-nowrap"> Employment test</a>
								<a href="/pages/recruitment.html" class="font-semibold"> Recruitment</a>
							</div>
						</div>

						<!-- dropdown two -->
						<div class="flex flex-col space-y-8 lg:relative" x-data="{ isSubMenuOpen: false }">
							<button
								@click="isSubMenuOpen = !isSubMenuOpen"
								class="font-semibold flex items-center justify-center space-x-2"
							>
								<span>Read Posts</span>
								<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6">
									<path
										fill-rule="evenodd"
										d="M12.53 16.28a.75.75 0 01-1.06 0l-7.5-7.5a.75.75 0 011.06-1.06L12 14.69l6.97-6.97a.75.75 0 111.06 1.06l-7.5 7.5z"
										clip-rule="evenodd"
									/>
								</svg>
							</button>
							<div
								class="flex flex-col space-y-8 lg:items-start lg:absolute lg:bg-gray-50 lg:rounded-lg lg:py-4 lg:px-6 lg:shadow-lg top-2"
								style="z-index: 999999999"
								x-show="isSubMenuOpen"
								@click.outside="isSubMenuOpen = false"
							>
								<a href="/pages/employment_test.html" class="font-semibold whitespace-nowrap"> Employment test</a>
								<a href="/pages/recruitment.html" class="font-semibold"> Recruitment</a>
							</div>
						</div>

						<a href="/#" class="bg-blue-900 px-10 font-bold text-white py-3 text-center rounded-lg shadow-lg"> Login</a>
					</div>

					<button class="lg:hidden" @click="isNavOpen = true">
						<svg
							xmlns="http://www.w3.org/2000/svg"
							class="h-10 w-10"
							fill="none"
							viewBox="0 0 24 24"
							stroke="currentColor"
							stroke-width="2"
						>
							<path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
						</svg>
					</button>
				</div>
			</nav>

			<!-- hero section -->
			<section
				style="background: url('/img/hero.png') center center/cover no-repeat; min-height: 80vh"
				class="relative flex justify-center items-center px-4 py-8"
			>
				<div class="absolute top-0 left-0 w-full h-full bg-black/60"></div>
				<div class="z-20 text-white relative h-full lg:w-3/5 mx-auto space-y-6 mb-10">
					<h1 class="md:text-5xl text-3xl font-bold text-center text-orange-600">About the Ripple Project</h1>
					<p class="md:text-xl text-base font-medium leading-9">
						The Ripple project is focused on identifying, engaging and building the capacity of young people to serve as
						peer educators on the prevention of Gender Based Violence (GBV) and harmful practices (HP) and in promoting
						Sexual and Reproductive Health and Rights (SRHR) in Nigeria. The Ripple project is currently been
						implemented in the Six Spotlight states, and has been led by the UNFPA/Spotlight implementing partner
						working in such states.
					</p>

					<div class="flex justify-center items-center space-x-6">
						<a
							href="#"
							class="px-10 py-3 font-semibold text-white rounded-lg text-center inline-block bg-yellow-500 border-2 border-yellow-500"
							>Register</a
						>
						<a
							href="#"
							class="px-10 py-3 font-semibold text-yellow-500 rounded-lg text-center inline-block border-4 border-yellow-500"
							>Read more...</a
						>
					</div>
				</div>
			</section>

			<div
				class="lg:flex grid grid-cols-2 gap-6 lg:justify-evenly lg:items-center w-11/12 md:w-4/5 mx-auto shadow rounded-md p-6 -m-14 z-30 relative bg-white"
			>
				<div class="space-y-3 text-center">
					<h3 class="text-4xl font-bold text-orange-500">22</h3>
					<p class="font-medium text-gray-600">Total Educated</p>
				</div>
				<div class="space-y-3 text-center">
					<h3 class="text-4xl font-bold text-orange-500">7</h3>
					<p class="font-medium text-gray-600">Personal Hygiene</p>
				</div>
				<div class="space-y-3 text-center">
					<h3 class="text-4xl font-bold text-orange-500">3</h3>
					<p class="font-medium text-gray-600">SGBV</p>
				</div>
				<div class="space-y-3 text-center">
					<h3 class="text-4xl font-bold text-orange-500">12</h3>
					<p class="font-medium text-gray-600">FGM</p>
				</div>
				<div class="space-y-3 text-center">
					<h3 class="text-4xl font-bold text-orange-500">22</h3>
					<p class="font-medium text-gray-600">Pregnancy & Family</p>
				</div>
			</div>

			<section class="p-4 mt-20">
				<div class="max-w-2xl mx-auto">
					<h3 class="text-lg md:text-2xl text-orange-600 font-semibold mb-4 text-center">
						Gender Distributiuon of Peers Educated
					</h3>
					<canvas id="genderChart" height="240">
						<p>Fetching Gender Data</p>
					</canvas>
				</div>
			</section>

			<section class="p-4 my-4 md:my-12">
				<div class="max-w-2xl mx-auto">
					<h3 class="text-lg md:text-2xl text-orange-600 font-semibold mb-4 text-center">
						Age Distribution of Peers Reached
					</h3>
					<canvas id="ageChart" height="240">
						<p>Fetching Age Data</p>
					</canvas>
				</div>
			</section>

			<section class="my-4 p-4">
				<h3
					class="text-xl uppercase text-center text-green-600 p-4 border-4 border-blue-600 rounded-md w-fit mx-auto -mb-6 bg-white relative z-20 font-bold"
				>
					LEADERBOARD
				</h3>
				<div class="max-w-3xl mx-auto relative rounded-xl pt-12 border-4 border-blue-600">
					<table class="w-full sm:rounded-xl overflow-x-auto">
						<tbody id="leaderboard" class="rounded-xl"></tbody>
					</table>
				</div>
			</section>
		</main>

		<script>
			/*
			const fakeData = [
				["DP", "Name", "points"],
				["/img/dp.jpg", "James kona", 9],
				["/img/dp.jpg", "Ula Bam", 8],
				["/img/dp.jpg", "Jane Doe", 6],
				["/img/dp.jpg", "Emma adam", 4],
				["/img/dp.jpg", "Kim jon", 4],
			];

			createTable(fakeData);
			*/

			getSheet();
			async function getSheet() {
				try {
					const res = await fetch(
						"https://script.google.com/macros/s/AKfycbyVjgW-KV5mH_bN1trgV95C194TY-Et__VCU7KWzeZleAvUpbQd2seAsoWU9CdXE8oj/exec"
					);

					const data = await res.json();

					createTable(data.leaderBoardValues);

					getLabeslAndValues(data.genderValues, {
						type: "bar",
						label: "Gender distribution",
						backgroundColor: ["purple", "blue", "orange"],
						elementID: "genderChart",
					});

					getLabeslAndValues(data.ageValues, {
						type: "doughnut",
						label: "Age distribution",
						backgroundColor: ["pink", "blue", "orange", "green", "yellow"],
						elementID: "ageChart",
					});

					//	console.log(data);
				} catch (error) {
					console.log(error);
				}
			}

			function createTable(leaderBoardData) {
				const theTable = document.getElementById("leaderboard");
				leaderBoardData.forEach((row, index) => {
					// don't display the 1st row, that is the title rows
					if (index === 0) return;
					const tableRow = document.createElement("tr");
					tableRow.classList = "odd:bg-blue-50 even:bg-gray-50  my-2";
					const indexColoumn = document.createElement("td");
					rank = index;
					indexColoumn.innerHTML = getBadge(rank);
					tableRow.appendChild(indexColoumn);
					row.forEach((rowData, index) => {
						const tableColoumn = document.createElement("td");
						tableColoumn.classList = ` text-gray-600 p-3 text-center  font-semibold last:font-extrabold`;
						if (index === 0) {
							const imgTag = document.createElement("img");
							imgTag.src = rowData;
							imgTag.classList = " h-12 w-12 mx-auto rounded-full border-4 border-blue-600";
							tableColoumn.appendChild(imgTag);
						} else {
							tableColoumn.textContent = rowData;
						}
						tableRow.appendChild(tableColoumn);
					});
					theTable.appendChild(tableRow);
				});
			}

			function getBadge(rank) {
				switch (rank) {
					case 1:
						return `<img src="/img/badge1.png" class="h-12 w-12 mx-auto">`;
					case 2:
						return `<img src="/img/badge2.png" class="h-12 w-12 mx-auto">`;
					case 3:
						return `<img src="/img/badge3.png" class="h-12 w-12 mx-auto">`;

					default:
						return `<p class='text-center'>${rank}</p>`;
				}
			}

			const getLabeslAndValues = (givenData, options) => {
				let labels = [];
				let values = [];
				givenData.forEach((dataRow) => {
					labels.push(dataRow[0]);
					values.push(dataRow[1]);
				});

				createChart(labels, values, options);
			};

			const createChart = (labels, values, options) => {
				const { type, label, backgroundColor, elementID } = options;

				const ctx = document.getElementById(elementID).getContext("2d");

				const myChart = new Chart(ctx, {
					type,
					data: {
						labels,
						datasets: [
							{
								label,
								data: values,
								backgroundColor,
								borderWidth: 2,
							},
						],
					},
					options: {
						scales: {
							y: {
								beginAtZero: true,
							},
						},
						plugins: {
							legend: {
								labels: {
									// This more specific font property overrides the global property
									font: {
										size: 18,
									},
								},
							},
						},
					},
				});
			};
		</script>
	</body>
</html>
