<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Ripple Project</title>

		<link rel="stylesheet" href="/dist/app.css" />

		<!-- alpine js -->
		<!-- <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script> -->

		<!-- chart js cdn -->
		<script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>

		<!-- google fonts -->
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&display=swap"
			rel="stylesheet"
		/>

		<style>
			body {
				font-family: "Montserrat", sans-serif;
			}

			tr > td:last-of-type > p {
				color: white;
				font-size: 25px;
				padding: 2px 12px;
				border-radius: 10px;
				background-color: #3366ff;
				display: inline-flex;
				justify-content: center;
				align-items: center;
			}
		</style>
	</head>
	<body class="bg-gray-50">
		<main>
			<!-- hero section -->
			<section
				style="background: url('/img/hero.png') center center/cover no-repeat; min-height: 80vh"
				class="relative flex justify-center items-center px-4 py-8"
			>
				<div class="absolute top-0 left-0 w-full h-full bg-black/60"></div>
				<div class="z-20 text-white relative h-full lg:w-3/5 mx-auto space-y-6 mb-10">
					<h1 class="md:text-5xl text-3xl font-bold text-center text-orange-600">About the Ripple Project</h1>
					<p class="md:text-xl text-base font-medium leading-9">
						The Ripple project is focused on identifying, engaging and building the capacity of young people to serve as
						peer educators on the prevention of Gender Based Violence (GBV) and harmful practices (HP) and in promoting
						Sexual and Reproductive Health and Rights (SRHR) in Nigeria. The Ripple project is currently been
						implemented in the Six Spotlight states, and has been led by the UNFPA/Spotlight implementing partner
						working in such states.
					</p>
				</div>
			</section>

			<section class="px-4 py-8 md:py-24 bg-white overflow-x-auto">
				<h3
					class="text-xl uppercase text-center text-green-600 p-4 border-4 border-blue-600 rounded-md w-fit mx-auto -mb-6 bg-white relative z-20 font-bold"
				>
					LEADERBOARD
				</h3>
				<div class="w-full md:max-w-3xl md:mx-auto relative rounded-xl pt-12 border-4 border-blue-600 overflow-x-auto">
					<table id="leaderboard" class="w-full rounded-xl whitespace-nowrap text-sm md:text-base"></table>
				</div>
			</section>

			<!-- <section class="px-4 py-6 lg:py-12 relative">
				<img src="/img/top_bubbles.svg" alt="" class="absolute hidden md:block top-0 left-0" />

				<img src="/img/bottom_bubbles.svg" alt="" class="absolute hidden md:block bottom-0 right-0" />
				<h3 class="text-xl md:text-3xl text-orange-600 font-semibold mt-4 mb-8 md:mb-20 text-center">
					Additional Data Captured
				</h3>
				<div
					class="overflow-x-auto whitespace-nowrap space-x-4 md:space-x-8 max-w-5xl mx-auto md:flex md:justify-center z-10"
				>
					<div class="inline-block relative whitespace-normal">
						<div class="absolute z-10 bg-black/50 top-0 left-0 w-full h-full rounded-md"></div>
						<img src="/img/data_image1.png" class="h-80 md:h-96" />
						<div class="absolute z-20 bg-white/30 bottom-0 left-0 w-full h-auto rounded-md p-2 text-orange-500">
							<h4 class="font-semibold text-center text-xl md:text-3xl">PWDâ€™s Reached</h4>
							<p class="text-3xl md:text-4xl font-bold text-center mt-3">9</p>
						</div>
					</div>

					<div class="inline-block relative whitespace-normal">
						<div class="absolute z-10 bg-black/50 top-0 left-0 w-full h-full rounded-md"></div>
						<img src="/img/data_image2.png" class="h-80 md:h-96" />
						<div class="absolute z-20 bg-white/30 bottom-0 left-0 w-full h-auto rounded-md p-2 text-orange-500">
							<h4 class="font-semibold text-center text-xl md:text-3xl">GBV Cases Reported</h4>
							<p class="text-3xl font-bold md:text-4xl text-center mt-3">12</p>
						</div>
					</div>

					<div class="inline-block relative whitespace-normal">
						<div class="absolute z-10 bg-black/50 top-0 left-0 w-full h-full rounded-md"></div>
						<img src="/img/data_image3.png" class="h-80 md:h-96" />
						<div class="absolute z-20 bg-white/30 bottom-0 left-0 w-full h-auto rounded-md p-2 text-orange-500">
							<h4 class="font-semibold text-center text-xl md:text-3xl">GBV Cases Referred</h4>
							<p class="text-3xl font-bold md:text-4xl text-center mt-3">10</p>
						</div>
					</div>
				</div>
			</section> -->
		</main>

		<script>
			/*
			const fakeData = [
				["DP", "Name", "points"],
				["/img/dp.jpg", "James kona", 9],
				["/img/dp.jpg", "Ula Bam", 8],
				["/img/dp.jpg", "Jane Doe", 6],
				["/img/dp.jpg", "Emma adam", 4],
				["/img/dp.jpg", "Kim jon", 4],
			];

			createTable(fakeData);
			*/

			getSheet();
			async function getSheet() {
				try {
					const res = await fetch(
						"https://script.google.com/macros/s/AKfycbxuOHVN8-o6vHURCRh9NvKhUVx8sPxqY5-mFKw9eHA2Bar0lR9-KI-4s-otqMitxxwa/exec"
					);

					const data = await res.json();

					createTable(data.leaderBoardData);
				} catch (error) {
					console.log(error);
				}
			}

			function createTable(leaderBoardData) {
				const theTable = document.getElementById("leaderboard");
				leaderBoardData.forEach((row, index) => {
					// don't display the 1st row, that is the title rows
					if (index === 0) return;
					const tableRow = document.createElement("tr");
					tableRow.classList = "odd:bg-blue-50 even:bg-zinc-50  my-2";
					const indexColoumn = document.createElement("td");
					rank = index;
					indexColoumn.innerHTML = getBadge(rank);
					tableRow.appendChild(indexColoumn);
					row.forEach((rowData, index) => {
						const tableColoumn = document.createElement("td");
						tableColoumn.classList = ` text-gray-600 p-3 text-center  font-semibold last:font-extrabold last:text-lg `;
						if (index === 0 || index === 2) {
							const imgTag = document.createElement("img");
							imgTag.src = rowData;
							imgTag.classList =
								index === 0
									? " h-10 min-w-[2.5rem] md:h-12  md:w-12 mx-auto rounded-full border-4 border-blue-600"
									: "h-4 md:h-8 mx-auto";
							tableColoumn.appendChild(imgTag);
						} else {
							const paragraphTag = document.createElement("p");
							paragraphTag.textContent = rowData;
							tableColoumn.appendChild(paragraphTag);
						}
						tableRow.appendChild(tableColoumn);
					});
					theTable.appendChild(tableRow);
				});
			}

			function getBadge(rank) {
				switch (rank) {
					case 1:
						return `<img src="/img/badge1.png" class="md:h-12 h-8  mx-auto">`;
					case 2:
						return `<img src="/img/badge2.png" class="md:h-12 h-8  mx-auto">`;
					case 3:
						return `<img src="/img/badge3.png" class="md:h-12 h-8  mx-auto">`;

					default:
						return `<p class='text-center'>${rank}</p>`;
				}
			}
		</script>
	</body>
</html>
